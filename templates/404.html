{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% load i18n %}

{% block styles %}
    <link href="{% md5url 'css/error-pages.min.css' %}" rel="stylesheet" type="text/css" media="screen"/>
{% endblock styles %}

{% block title %}{{ title|default:"–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞" }}{% endblock %}

{% block content %}
    <div class="error-container">
        <div class="error-card">
            <div class="error-header">
                <h1>{{ title|default:"–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞! –û—à–∏–±–∫–∞ 404" }}</h1>
            </div>

            <div class="error-body">
                {% if project %}

                    <div class="availability-info {% if reason == 'future_exhibition' %}future{% elif reason == 'active_exhibition' %}active{% endif %}">
                        <h4>
                            {% if reason == 'future_exhibition' %}‚è≥{% endif %}
                            {% if reason == 'active_exhibition' %}üîí{% endif %}
                            {{ message }}
                        </h4>

                        <p>–ê–≤—Ç–æ—Ä: <b>{{ project.owner }}</b></p>

                        {% if available_date %}
                            <div class="countdown-card">
                                <p>–î–æ—Å—Ç—É–ø –æ—Ç–∫—Ä–æ–µ—Ç—Å—è:</p>
                                <h3>{{ available_date|date:"d E Y" }}</h3>
                            </div>
                        {% endif %}
                    </div>

                    <a href="{{ author_profile_url }}" class="btn">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥—Ä—É–≥–∏–µ —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ—Ä–∞</a>

                {% else %}
                    <div style="text-align: center; padding: 2rem 0;">
                        <p style="font-size: 1.25rem; margin-bottom: 2rem;">
                            –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞.
                        </p>
                    </div>
                {% endif %}

                <div class="navigation-buttons">
                    <a href="/" class="btn btn-primary">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                    <a href="{{ exhibitions_url }}" class="btn btn-primary">
                        {% if project.exhibition %}
                            –í—ã—Å—Ç–∞–≤–∫–∞ {{ project.exhibition.exh_year }}
                        {% else %}
                            –í—Å–µ –≤—ã—Å—Ç–∞–≤–∫–∏
                        {% endif %}
                    </a>

                    {% if has_user_profile %}
                        <a href="{{ user_profile_url }}" class="btn btn-primary">–õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</a>
                    {% elif request.user.is_authenticated %}
                        <a href="/account/" class="btn btn-primary">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                    {% endif %}
                </div>
            </div>

            <div class="error-footer">
                <p>
                    –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?
                    <a href="mailto:{{ CONTACT_EMAIL|default:'info@sd43.ru' }}">–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</a>
                </p>
            </div>
        </div>
    </div>
{% endblock %}
